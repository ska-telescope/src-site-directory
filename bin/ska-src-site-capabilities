#!/usr/bin/env python

import argparse

from ska_src_site_capabilities_api.client.site_capabilities import SiteCapabilitiesClient


def add_args_for_ping(ping_parser):
    ping_parser.add_argument('--api-url', help="site-capabilities api url", type=str,
                             default="https://site-capabitities.srcdev.skao.int/api/v1")


if __name__ == "__main__":
    parser = argparse.ArgumentParser()
    subparsers = parser.add_subparsers(help='command line interface for the site-capabilities api', dest='command')

    # ping
    ping_parser = subparsers.add_parser("ping")
    ping_parser_subparsers = authorise_parser.add_subparsers(help="ping", dest='subcommand')
    add_args_for_ping(ping_parser_subparsers)

    args = parser.parse_args()

    if args.command == 'ping':
        client = SiteCapabilitiesClient(args.api_url)
        client.ping()
    else:
        print(parser.print_help())

